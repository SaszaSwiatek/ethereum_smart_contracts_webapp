{% extends "base_col_1.html" %}
{% from "macros/_macros_form.html" import render_field %}
{% block title %}Contract Details{% endblock %}

{% block pageContent %}
    <h1>Contract Details</h1>
    <strong>{{ message }}</strong>
    <form method="POST">
        {{ form.hidden_tag() }}
        {{ render_field(form.title, readonly=true) }}
        {{ render_field(form.contract_date_added, readonly=true) }}
        {{ render_field(form.initiator_user_id, readonly=true, disabled="true") }}
        {{ render_field(form.contractor_user_id, readonly=true, disabled="true") }}
        {{ render_field(form.content, readonly=true) }}
        {{ render_field(form.contract_template_id, readonly=true, disabled="true") }}
        {{ render_field(form.value, readonly=true) }}
        {{ render_field(form.duedate, readonly=true) }}
        {{ render_field(form.contractor_approval, readonly=true) }}
        {{ render_field(form.contractor_approval_timestamp, readonly=true) }}
        {{ render_field(form.is_deployed, readonly=true) }}
        {{ render_field(form.is_finalized, readonly=true) }}
        {{ render_field(form.finalization_timestamp, readonly=true) }}
        {% if allow_edit == True %}
            {% set url = "/contract/" +  form.contract_id.data|string() + "/edit" %}
            <a class="btn btn-info pull-right" href="{{url}}">Edit contract</a>
        {% endif %}
        {% if allow_approval == True %}
            {{form.approve(class_="btn btn-success pull-right")}}
        {% endif %}
        {% if allow_finalize == True %}
            {{form.finalize(class_="btn btn-success pull-right")}}
        {% endif %}
        {% if allow_add_attachment == True %}
            {% set url = "/contract/" +  form.contract_id.data|string() + "/add_attachment" %}
            <a class="btn btn-info pull-right" href="{{url}}">Add Attachment</a>
        {% endif %}

    </form>
{% endblock %}